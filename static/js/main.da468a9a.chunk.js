(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(24)},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),i=a(2),o=a(3),u=a(5),s=a(4),l=a(1);var f=function(e){var t=e.city,a=e.select,n=t.html;return r.a.createElement("li",{onClick:function(){return a(t)},dangerouslySetInnerHTML:{__html:n}})};function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var h=function(e){Object(u.a)(a,e);var t=p(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.foundCities;return r.a.createElement("ul",{className:"auto-complete"},t.map(function(t){return r.a.createElement(f,{select:e.props.select,key:t.id,city:t})}))}}]),a}(n.Component);function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var d=function(e){Object(u.a)(a,e);var t=m(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.foundCities,a=e.onSearchInput,n=e.onSearcFocus,c=e.onSearcBlur,i=e.searchFocused;return r.a.createElement("div",{className:"search-bar",onFocus:n,onBlur:c},r.a.createElement("input",{placeholder:"Search",className:"search-field",type:"search",onChange:a}),t.length&&i?r.a.createElement(h,{select:this.props.select,foundCities:t}):null)}}]),a}(n.Component),y="https://api.openweathermap.org/data/2.5/",v="1d0043e9a6077c0e96a2cea071bf251b";function b(e){return"http://openweathermap.org/img/wn/".concat(e,"@2x.png")}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weather";return"".concat(y+t,"?id=").concat(e,"&APPID=").concat(v)}var w={apiKey:"AIzaSyAEpkcjRZPTl1kH97sTXc-nkLJ-mJ6DHn8",authDomain:"weather-app-f1e4e.firebaseapp.com",databaseURL:"https://weather-app-f1e4e.firebaseio.com",projectId:"weather-app-f1e4e",storageBucket:"weather-app-f1e4e.appspot.com",messagingSenderId:"1022251616365",appId:"1:1022251616365:web:e347162dfdc34d178e9764"};function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var S=function(e){Object(u.a)(a,e);var t=j(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={weatherData:{},availableUnits:["C","F","K"],isAvailableUnitsShown:!1},e.getWeatherData=function(t){fetch(g(t)).then(function(e){return e.json()}).then(function(t){var a={dt:t.dt,country:t.sys.country,name:t.name,icon:t.weather[0].icon,id:t.weather[0].id,description:t.weather[0].description,temperature:t.main.temp};e.setState({weatherData:a})})},e.toggleAvailableUnitsVisib=function(){e.setState({isAvailableUnitsShown:!e.state.isAvailableUnitsShown})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getWeatherData(this.props.cityId)}},{key:"componentDidUpdate",value:function(e){this.props.cityId!==e.cityId&&this.getWeatherData(this.props.cityId)}},{key:"render",value:function(){if(0===Object.keys(this.state.weatherData).length)return null;var e=this.state.weatherData,t=e.dt,a=e.icon,n=e.description,c=e.country,i=e.name,o=e.temperature,u=this.state.availableUnits,s=this.props,l=s.unitName,f=s.onUnitChange,p=s.blured,h=new Date(1e3*t),m=h.toLocaleDateString("en",{weekday:"long"}),d={hours:"".concat(h.getHours()).padStart(2,"0"),minutes:"".concat(h.getMinutes()).padStart(2,"0")},y=this.props.calcTemperature(o,l);return r.a.createElement("div",{className:"content ".concat(p?"blured":"")},r.a.createElement("h1",{className:"title"},i,", ",c),r.a.createElement("span",null,m," ",d.hours,":",d.minutes),r.a.createElement("p",{className:"description"},n),r.a.createElement("img",{className:"weather-icon",src:b(a),alt:n}),r.a.createElement("div",{className:"temperature"},y,r.a.createElement("ul",{className:"temperature-units"},r.a.createElement("li",{className:"unit",onClick:this.toggleAvailableUnitsVisib},"\xb0",l),this.state.isAvailableUnitsShown?u.map(function(e){return e!==l?r.a.createElement("li",{className:"unit",key:e,onClick:function(){return f(e)}},e):null}):null)))}}]),a}(n.Component),D=function(e){var t=e.day,a=e.weatherData,n=e.unitName,c=e.calcTemperature;var i=a.reduce(function(e,t){var a=t.weather[0].icon.replace(/[a-z]/g,"");return e[a]=e.hasOwnProperty(a)?e[a]+1:1,e},{}),o=Object.keys(i).reduce(function(e,t){return i[e]>i[t]?e:t}),u=b("".concat(o,"d")),s=a[0].weather[0].description,l=a.reduce(function(e,t){var a=t.main,n=a.temp_min,r=a.temp_max;return e.min=n<e.min?n:e.min,e.max=r>e.max?r:e.max,e},{min:1/0,max:-1/0});return r.a.createElement("li",{key:a[0].dt},r.a.createElement("div",null,t),r.a.createElement("img",{className:"weather-icon",src:u,alt:s}),r.a.createElement("div",null,c(l.max,n),"\xb0",r.a.createElement("span",{className:"min-temp"}," ",c(l.min,n),"\xb0")))};function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var E=function(e){Object(u.a)(a,e);var t=O(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={dailyWeatherForecastData:{}},e.groupWeatherData=function(e){return e.reduce(function(e,t){var a=new Date(1e3*t.dt).toLocaleDateString("en",{weekday:"long"});return e["".concat(a)]||(e["".concat(a)]=[]),e["".concat(a)].push(t),e},{})},e.getWeatherData=function(t){fetch(g(t,"forecast")).then(function(e){return e.json()}).then(function(t){var a=e.groupWeatherData(t.list);e.setState({dailyWeatherForecastData:a})}).catch(function(e){return console.error(e)})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.getWeatherData(this.props.cityId)}},{key:"componentDidUpdate",value:function(e){this.props.cityId!==e.cityId&&this.getWeatherData(this.props.cityId)}},{key:"render",value:function(){var e=this,t=this.props.unitName,a=this.state.dailyWeatherForecastData;return 0===Object.keys(a).length?null:r.a.createElement("ul",{className:"weather-forecast"},Object.keys(a).map(function(n){return r.a.createElement(D,{key:n,day:n,weatherData:a[n],unitName:t,calcTemperature:e.props.calcTemperature})}))}}]),a}(n.Component),k=a(13),C=a.n(k);a(20);function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(s.a)(this,a)}}var R=function(e){Object(u.a)(a,e);var t=I(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={defaultCityId:703447,selectedCityId:null,foundCities:[],searchFocused:!1,temperatureUnit:"C"},e.firebaseApp=C.a.initializeApp(w),e.database=e.firebaseApp.database(),e.onSearchInput=function(t){var a=t.target.value.replace(/[^\w\s]/gi,"");if(""===a||" "===a)e.setState({foundCities:[]});else{var n=new RegExp(a,"i");e.database.ref("/").orderByChild("name").startAt(a).limitToFirst(6).once("value",function(t){var a=Object.values(t.val()).filter(function(e){return e.name.match(n)});a.forEach(function(e){e.html=e.name.replace(n,function(e){return"<u>".concat(e,"</u>")})+", ".concat(e.country)}),e.setState({foundCities:a})})}},e.onListItemSelect=function(t){e.setState({selectedCityId:t.id})},e.onSearcFocus=function(){e.setState({searchFocused:!0})},e.onSearcBlur=function(){setTimeout(function(){e.setState({searchFocused:!1})},100)},e.changeTemperatureUnit=function(t){e.setState({temperatureUnit:t})},e.calcTemperature=function(e,t){switch(t){case"C":e-=273.15;break;case"F":e=9*e/5-459.67}return Math.round(e)},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state,t=e.selectedCityId,a=e.defaultCityId,n=e.foundCities,c=e.searchFocused,i=e.temperatureUnit;return r.a.createElement("div",{className:"container backdrop-blur"},r.a.createElement(d,{select:this.onListItemSelect,onSearchInput:this.onSearchInput,onSearcFocus:this.onSearcFocus,onSearcBlur:this.onSearcBlur,foundCities:n,searchFocused:c}),r.a.createElement(S,{cityId:t||a,blured:!!(n.length>0&&c),unitName:i,onUnitChange:this.changeTemperatureUnit,calcTemperature:this.calcTemperature}),r.a.createElement(E,{cityId:t||a,unitName:i,calcTemperature:this.calcTemperature}))}}]),a}(n.Component);a(23);Object(c.render)(r.a.createElement(R,null),document.getElementById("app"))}},[[14,1,2]]]);
//# sourceMappingURL=main.da468a9a.chunk.js.map